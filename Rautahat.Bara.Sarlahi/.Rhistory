group_by(household_questionnaire_id,season_of_crop,name_of_crop) %>%
summarise(sum1=sum(cult_area_under_crop)) %>%
group_by(season_of_crop,name_of_crop) %>%
summarise(mean(sum1))
ses <- R.Agriculture_Baseline_2018_ %>%
select(1,3,4,7) %>%
group_by(household_questionnaire_id,season_of_crop,name_of_crop) %>%
summarise(sum1=sum(cult_area_under_crop))
R.Agriculture_Baseline_2018_ %>%
select(1,3,4,7) %>%
group_by(household_questionnaire_id,season_of_crop,name_of_crop) %>%
summarise(sum1=sum(cult_area_under_crop)) %>%
group_by(season_of_crop,name_of_crop) %>%
summarise(sum(cult_area_under_crop))
ses <- R.Agriculture_Baseline_2018_ %>%
select(1,3,4,7) %>%
group_by(household_questionnaire_id,season_of_crop,name_of_crop) %>%
summarise(sum1=sum(cult_area_under_crop)) %>%
group_by(season_of_crop,name_of_crop) %>%
summarise(sum(cult_area_under_crop))
ses <- R.Agriculture_Baseline_2018_ %>%
select(1,3,4,7) %>%
group_by(household_questionnaire_id,season_of_crop,name_of_crop) %>%
summarise(sum1=sum(cult_area_under_crop)) %>%
group_by(season_of_crop) %>%
summarise(sum(cult_area_under_crop))
ses <- R.Agriculture_Baseline_2018_ %>%
select(1,3,4,7) %>%
group_by(household_questionnaire_id,season_of_crop,name_of_crop) %>%
summarise(sum1=sum(cult_area_under_crop)) %>%
group_by(season_of_crop,name_of_crop) %>%
summarise(mean(sum1))
ses <- R.Agriculture_Baseline_2018_ %>%
select(1,3,4,7) %>%
group_by(household_questionnaire_id,season_of_crop,name_of_crop) %>%
summarise(sum1=sum(cult_area_under_crop))
R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="3") %>%
group_by(name_of_crop)%>%
summarise(mean(cult_area_under_crop),pp=sum(cult_area_under_crop/1061))
#Summer
s <- R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="3") %>%
group_by(name_of_crop)%>%
summarise(mean(cult_area_under_crop),pp=sum(cult_area_under_crop/1061))
s <- R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="3") %>%
group_by(name_of_crop)%>%
summarise(mean(cult_area_under_crop),pp=sum(cult_area_under_crop/1061))
ses <- R.Agriculture_Baseline_2018_ %>%
select(1,3,4,7) %>%
group_by(household_questionnaire_id,season_of_crop,name_of_crop) %>%
summarise(sum1=sum(cult_area_under_crop)) %>%
group_by(season_of_crop,name_of_crop) %>%
summarise(mean(sum1))
s <- R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="2") %>%
group_by(name_of_crop)%>%
summarise(mean(cult_area_under_crop),pp=sum(cult_area_under_crop/7005))
R.Agriculture_Baseline_2018_ %>%
group_by(season_of_crop) %>%
summarise(sum(cult_area_under_crop))
R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(name_of_crop) %>%
summarise(mean(cult_area_under_crop), pp=sum(cult_area_under_crop/7564))
R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="2") %>%
group_by(name_of_crop)%>%
summarise(mean(cult_area_under_crop),pp=sum(cult_area_under_crop/7005))
R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1")
a <- R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(name_of_crop) %>%
summarise(mean(cult_area_under_crop), pp=sum(cult_area_under_crop/7564))
View(a)
#Monsoon
a <- R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1")
View(a)
a <- R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(name_of_crop) %>%
summarise(mean(cult_area_under_crop), pp=sum(cult_area_under_crop/7564))
#season_of_crop / name_of_crop
ses <- R.Agriculture_Baseline_2018_ %>%
select(1,3,4,7) %>%
group_by(household_questionnaire_id,season_of_crop,name_of_crop) %>%
summarise(sum1=sum(cult_area_under_crop))
a <- R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(name_of_crop) %>%
summarise(mean(cult_area_under_crop), pp=sum(cult_area_under_crop/7564))
R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(household_questionnaire_id,name_of_crop) %>%
summarise(mean(cult_area_under_crop), pp=sum(cult_area_under_crop/7564))
R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(household_questionnaire_id,name_of_crop) %>%
summarise(n()) %>%
group_by(name_of_crop) %>%
summarise(mean(cult_area_under_crop), pp=sum(cult_area_under_crop/7564))
R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(household_questionnaire_id,name_of_crop) %>%
summarise(n())
aa <- R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(household_questionnaire_id,name_of_crop) %>%
summarise(n())
View(aa)
aa <- R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(household_questionnaire_id) %>%
summarise(n())
aa <- R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(household_questionnaire_id,name_of_crop) %>%
summarise(n())
aa <- R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(household_questionnaire_id,name_of_crop) %>%
summarise(sum(cult_area_under_crop))
R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(household_questionnaire_id,name_of_crop) %>%
summarise(sum(cult_area_under_crop)) %>%
group_by(name_of_crop) %>%
sum(cult_area_under_crop)
R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(household_questionnaire_id,name_of_crop) %>%
summarise(sum(cult_area_under_crop)) %>%
group_by(name_of_crop) %>%
summarise(sum(cult_area_under_crop))
R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(household_questionnaire_id,name_of_crop) %>%
summarise(sum(cult_area_under_crop)) %>%
group_by(name_of_crop) %>%
summarise(mean(cult_area_under_crop), pp=sum(cult_area_under_crop/7564))
R.Agriculture_Baseline_2018_ %>%
select(1,3,4,7) %>%
group_by(household_questionnaire_id,season_of_crop,name_of_crop) %>%
summarise(sum1=sum(cult_area_under_crop)) %>%
group_by(season_of_crop,name_of_crop) %>%
summarise(mean(sum1))
R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(household_questionnaire_id,name_of_crop) %>%
summarise(sum(cult_area_under_crop)) %>%
group_by(name_of_crop) %>%
summarise(pp=sum(cult_area_under_crop/7564))
R.Agriculture_Baseline_2018_ %>%
filter(cult_area_under_crop>0,season_of_crop=="1") %>%
group_by(name_of_crop) %>%
summarise(pp=sum(cult_area_under_crop/7564))
R.Agriculture_Baseline_2018_ %>%
filter(season_of_crop=="1") %>%
group_by(name_of_crop) %>%
summarise(pp=sum(cult_area_under_crop/7564))
R.Agriculture_Baseline_2018_ %>%
filter(season_of_crop=="2") %>%
group_by(name_of_crop)%>%
summarise(pr=sum(cult_area_under_crop/7005))
R.Agriculture_Baseline_2018_ %>%
filter(season_of_crop=="4") %>%
group_by(name_of_crop)%>%
summarise(p=sum(cult_area_under_crop/526))
#Monsoon
R.Agriculture_Baseline_2018_ %>% filter(season_of_crop=="1") %>%
group_by(name_of_crop)%>%summarise(pr=sum(cult_area_under_crop/7564))
T304707129-180 T304802122-49-------------------------------------------------------
rm(a,aa,s,ses)
R.Agriculture_Baseline_2018_ %>%
group_by(household_questionnaire_id,name_of_crop) %>%
summarise(sum_cult_area=sum(cult_area_under_crop))%>%
group_by(name_of_crop) %>%
summarise(no.HH=n(),no.HH/133
)
R.Agriculture_Baseline_2018_ %>%
group_by(household_questionnaire_id,season_of_crop) %>%
summarise(sum_cult_area=sum(cult_area_under_crop))%>%
group_by(season_of_crop) %>%
summarise(mean = mean(sum_cult_area),
per=sum(sum_cult_area)/
sum(R.Agriculture_Baseline_2018_$cult_area_under_crop,na.rm = T)
)
R.Agriculture_Baseline_2018_ %>%
group_by(household_questionnaire_id,name_of_crop) %>%
summarise(sum_cult_area=sum(cult_area_under_crop))%>%
group_by(name_of_crop) %>%
summarise(mean = mean(sum_cult_area),
per= sum(sum_cult_area)/
sum(R.Agriculture_Baseline_2018_$cult_area_under_crop,na.rm = T)
)
#season/crop
ses1 <- R.Agriculture_Baseline_2018_ %>%
filter(!is.na(irri_for_season))%>%
group_by(season_of_crop,name_of_crop) %>%
summarise(count = n(),
sum_irri=sum(irri_for_season),
mean=mean(irri_for_season),
)
# season
ses2 <- R.Agriculture_Baseline_2018_ %>%
filter(!is.na(irri_for_season)) %>%
group_by(season_of_crop) %>%
summarise(count = n(),
sum=sum(irri_for_season),
mean=mean(irri_for_season),
min=min(irri_for_season),
max=max(irri_for_season)
)
#crop
ses3 <- R.Agriculture_Baseline_2018_ %>%
filter(!is.na(irri_for_season))%>%
group_by(name_of_crop) %>%
summarise(count = n(),sum=sum(irri_for_season),
mean=mean(irri_for_season),
min=min(irri_for_season),
max=max(irri_for_season)
)
View(ses1)
View(ses2)
View(ses3)
R.Agriculture_Baseline_2018_ %>%
filter(!is.na(irri_for_season))%>%
group_by(season_of_crop,name_of_crop) %>%
summarise(count = n(),
sum_irri=sum(irri_for_season),
mean=mean(irri_for_season),
)
R.Agriculture_Baseline_2018_ %>%
filter(!is.na(irri_for_season))%>%
group_by(season_of_crop,name_of_crop) %>% #hgfgfb
summarise(count = n(),#jhbggf
sum_irri=sum(irri_for_season),
mean=mean(irri_for_season),
)
mydata <- cbind(household_questionnaire_id,name_of_crop,season_of_crop,cult_area_under_crop,
most_imp_source,TC,irri_for_season)
rm
rm(ses1,ses2,ses3)
View(mydata)
View(mydata)
mydata <- data.frame(mydata)
mydata <- cbind(household_questionnaire_id,name_of_crop,season_of_crop,cult_area_under_crop,
most_imp_source,TC,irri_for_season)
mydataa <- data.frame(mydata)
View(mydataa)
mydata <- data.frame(mydata)
psmodel <- glm(TC ~ name_of_crop+season_of_crop+cult_area_under_crop+most_imp_source,
family = binomial(),data = mydata)
View(psmodel)
psmodel
name_of_crop
attach(R.Agriculture_Baseline_2018_)
name_of_crop
mydata <- cbind(household_questionnaire_id,name_of_crop,season_of_crop,cult_area_under_crop,
most_imp_source,TC,irri_for_season)
mydata <- data.frame(mydata)
rm(mydataa)
psmodel <- glm(TC ~ name_of_crop+season_of_crop+cult_area_under_crop+most_imp_source,
family = binomial(),data = mydata)
psmodel
summary(psmodel)
pscore <- psmodel$fitted.values
pscore
class(name_of_crop)
class(season_of_crop)
class(cult_area_under_crop)
class(most_imp_source)
library(tableone)
library(dplyr)
Data <- cbind(household_questionnaire_id,name_of_crop,season_of_crop,cult_area_under_crop,
most_imp_source,TC,irri_for_season)
Data <- data.frame(mydata)
dim(Data)
dim(Data)
class(name_of_crop)
dim(Data)
head(Data)
Treats <- subset(Data,  TC == 2)
View(Treats)
colMeans(Treats)
Data <- cbind(season_of_crop,cult_area_under_crop,
most_imp_source,TC,irri_for_season)
Data <- data.frame(mydata)
dim(Data)
Treats <- subset(Data,  TC == 2)
Treats <- subset(Data,  TC == 2)
Data <- cbind(season_of_crop,cult_area_under_crop,
most_imp_source,TC,irri_for_season)
Data <- data.frame(mydata)
View(Treats)
View(Treats)
View(Treats)
View(Treats)
View(Treats)
rm(Treats,Data,mydata,psmodel,pscore)
Data <- cbind(season_of_crop,cult_area_under_crop,
most_imp_source,TC,irri_for_season)
Data <- data.frame(mydata)
Data <- data.frame(Data)
dim(Data)
Treats <- subset(Data,  TC == 2)
colMeans(Treats)
Data <- cbind(household_questionnaire_id,season_of_crop,cult_area_under_crop,
most_imp_source,TC,irri_for_season)
Data <- data.frame(Data)
Treats <- subset(Data,  TC == 2)
colMeans(Treats)
Data <- cbind(season_of_crop,cult_area_under_crop,
most_imp_source,TC,irri_for_season)
Data <- data.frame(Data)
dim(Data)
Treats <- subset(Data,  TC == 2)
colMeans(Treats)
Data %>% na.omit()
Treats <- subset(Data,  TC == 2)
View(Treats)
Data %>% na.omit()
Data %>% drop_na()
library(tidyr)
Data %>% drop_na()
Data <- Data %>% na.omit()
dim(Data)
dim(Data)
Treats <- subset(Data,  TC == 2)
colMeans(Treats)
View(Treats)
Treats <- subset(Data,  TC == 2)
colMeans(Treats)
Control <- subset(Data,  TC == 1)
colMeans(Control)
Treats
View(Treats)
View(Treats)
Treats <- subset(Data,  TC == 2)
colMeans(Treats)
Control <- subset(Data,  TC == 1)
colMeans(Control)
Treats <- subset(Data,  TC == 2)
colMeans(Treats)
Control <- subset(Data,  TC == 1)
colMeans(Control)
Treats <- subset(Data,  TC == 2)
colMeans(Treats)
Control <- subset(Data,  TC == 1)
colMeans(Control)
dim(Treats)
dim(Control)
model_1 <- lm(irri_for_season ~ TC + most_imp_source + cult_area_under_crop,data=Data)
model_1
Effect <- model_1$coefficients
Effect
Effect <- model_1$coefficients[2]
Effect
pscores.model <- glm(TC ~ most_imp_source + cult_area_under_crop,family = binomial("logit"),data = Data)
summary(pscores.model)
View(Treats)
df <- tbl_df(data.frame(x = rep(1:3, each = 4)))
df <- tbl_df(data.frame(x = rep(1:3, each = 4)))
df
df <- tbl_df(data.frame(x = rep(1:0, each = 40)))
df
View(df)
df %>%
mutate(pop = sample(0:1, n(), replace = TRUE))
df %>%
mutate(pop = sample(0:1, n(), replace = TRUE))
Data %>%
mutate(pop = sample(0:1, n(), replace = TRUE))
data.frame(Data)
Data <- Data %>%
mutate(sell = sample(0:1, n(), replace = TRUE))
rm(df)
View(Data)
Data <- data.frame(Data)
dim(Data)
Treats <- subset(Data,  TC == 2)
colMeans(Treats)
Control <- subset(Data,  TC == 1)
colMeans(Control)
dim(Treats)
dim(Control)
Data
Treats <- subset(Data,  TC == 2)
colMeans(Treats)
Control <- subset(Data,  TC == 1)
colMeans(Control)
dim(Treats)
model_1 <- lm(sell ~ TC + most_imp_source + cult_area_under_crop,data=Data)
model_1
Effect <- model_1$coefficients[2]
Effect
pscores.model <- glm(TC ~ most_imp_source + cult_area_under_crop,family = binomial("logit"),data = Data)
summary(pscores.model)
Data$TC[Data$TC == 1] <- 0
View(Data)
Data$TC[Data$TC == 2] <- 1
View(Data)
Treats
Treats <- subset(Data,  TC == 1)
View(Data)
Control <- subset(Data,  TC == 0)
Control
Treats
model_1 <- lm(irri_for_season ~ TC + most_imp_source + cult_area_under_crop,data=Data)
model_1
pscores.model <- glm(TC ~ most_imp_source + cult_area_under_crop,family= binomial("logit"),data = Data)
summary(pscores.model)
Propensity_scores <- pscores.model
Propensity_scores
Data$PScores <- pscores.model$fitted.values
Data$PScores
hist(Data$PScores[TC==1],main = "PScores of Response = 1")
hist(Data$PScores[TC==0],main = "PScores of Response = 0")
hist(Data$PScores[TC==1],main = "PScores of Response = 1")
hist(Data$PScores[TC==0],main = "PScores of Response = 0")
library(MatchIt)
match1 <- matchit(pscores.model, method="exact",data=Data)
match1
summary(match1, covariates = T)
match1.data <- match.data(match1)
View(match1.data)
table_match1 <- CreateTableOne(vars = xvars,strata = "solar_pump",data = match1.data,test = FALSE)
library(tableone)
table_match1 <- CreateTableOne(vars = xvars,strata = "solar_pump",data = match1.data,test = FALSE)
table_match1 <- CreateTableOne(vars =vars,strata = "solar_pump",data = match1.data,test = FALSE)
table_match1 <- CreateTableOne(vars =any ,strata = "solar_pump",data = match1.data,test = FALSE)
table_match1 <- CreateTableOne(vars =xvars ,strata = "solar_pump",data = match1.data,test = FALSE)
263+102
pscores.model <- glm(TC ~ most_imp_source + cult_area_under_crop,family= binomial("logit"),data = Data)
pscores.model
summary(pscores.model)
Propensity_scores <- pscores.model
Data$PScores <- pscores.model$fitted.values
Propensity_scores
Data$PScores
pscores.model
pscores.model
summary(pscores.model)
Propensity_scores
match1
match2 <- matchit(pscores.model, method="nearest", radio=1,data=Data)
plot(match2, type="jitter")
attach(R.Agriculture_Baseline_2018_)
library(tableone)
library(MatchIt)
library(dplyr)
Data <- cbind(season_of_crop,cult_area_under_crop,
most_imp_source,TC,irri_for_season)
Data <- data.frame(Data)
Data <- Data %>% na.omit()
Data <- Data %>%
mutate(sell = sample(0:1, n(), replace = TRUE))
Data$TC[Data$TC == 1] <- 0
Data$TC[Data$TC == 2] <- 1
pscores.model <- glm(TC ~ most_imp_source + cult_area_under_crop,family= binomial("logit"),data = Data)
summary(pscores.model)
pscores.model <- glm(TC ~ most_imp_source + cult_area_under_crop,family= binomial,data = Data)
summary(pscores.model)
Propensity_scores <- pscores.model
Data$PScores <- pscores.model$fitted.values
Data$PScores
pscores <- pscores.model$fitted.values
pscores
table_match1 <- CreateTableOne(vars =xvars ,strata = "solar_pump",data = match1.data,test = FALSE)
match2 <- matchit(pscores.model, method="nearest", radio=1,data=Data)
match2
plot(match2, type="jitter")
attach(R.Agriculture_Baseline_2018_)
library(tableone)
library(MatchIt)
library(dplyr)
pscores.model
summary(pscores.model)
attach(R,Water_extraction_mechanism_Baseline_2018_)
attach(R.Water_extraction_mechanism_Baseline_2018_)
cbind(R.Water_extraction_mechanism_Baseline_2018_[15:22], R.Water_extraction_mechanism_Baseline_2018_[25:30])
dt2 <- cbind(R.Water_extraction_mechanism_Baseline_2018_[15:22], R.Water_extraction_mechanism_Baseline_2018_[25:30])
rm(dt2)
attach(R.Agriculture_Baseline_2018_)
glm(TC ~ most_imp_source + cult_area_under_crop,family= binomial,data = Data)
glm(TC ~ most_imp_source + cult_area_under_crop,data = Data,method="subclass")
library(Matching)
library(data.table)
require(MatchIt)
require(Matching)
glm(TC ~ most_imp_source + cult_area_under_crop,data = Data,method="subclass")
summary(pscores.model)
m.out <- matchit(TC ~ most_imp_source + cult_area_under_crop,data = Data,method="subclass")
summary(m.out)
matchedIns <- match.data(m.out)
matchedIns
View(matchedIns)
View(Control)
View(Control_and_treatment_4_districts)
View(Data)
View(m.out)
View(match1)
View(match1.data)
View(matchedIns)
plot(m.out, type="jitter")
plot(m.out, type="jitter")
integer(0)
plot(m.out, type="hist")
save.image("~/R/Rautahat.Bara.Sarlahi/.RData")
